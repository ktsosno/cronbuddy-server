'use strict';var crontab=require('crontab');module.exports=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return crontab.load(function(d,e){d?b.send({error:'Failed to invoke crontab',trace:d}):a(e,b,c)})};
"use strict";exports.extractPayload=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b={};for(var c in a.body)b[c]=a.body[c];return b};
'use strict';module.exports=function(a,b,c){c.action&&c.timing||b.send({error:'Insufficient parameters passed for create'});var d=a.create(c.action,c.timing);d?a.save(function(e){e?b.send({error:'Error saving crontab',trace:e}):b.send({message:'Job successfully created'})}):b.send({error:'Failed to create new job'})};
'use strict';module.exports=function(a,b,c){c.action||b.send({error:'Insufficient parameters passed for delete'}),a.remove({command:c.action}),a.save(function(d){d?b.send({error:'Error deleting cron job',trace:d}):b.send({message:'Cron job successfully deleted'})})};
"use strict";module.exports=function(a,b){var c=a.jobs(),d=[];0<c.length&&c.forEach(function(e){d.push(e.toString())}),b.send({jobs:d})};
'use strict';var express=require('express'),app=express(),bodyParser=require('body-parser'),router=express.Router(),crontab=require('./app/helpers/crontab'),utils=require('./app/helpers/utils'),loadDirective=require('./app/routes/load'),createDirective=require('./app/routes/create'),deleteDirective=require('./app/routes/delete'),SERVER_PORT=8080;app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json()),app.use('/app',router),app.listen(SERVER_PORT),console.log('CronBuddy\nListening on '+SERVER_PORT+'...'),router.get('/load',function(a,b){crontab(loadDirective,b)}),router.post('/create',function(a,b){var c=utils.extractPayload(a);crontab(createDirective,b,c)}),router.post('/delete',function(a,b){var c=utils.extractPayload(a);crontab(deleteDirective,b,c)});
